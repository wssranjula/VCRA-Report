<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>VCRA Product Inspectation</title>
    <meta content="" name="description">
    <meta content="" name="keywords">

    <!-- Favicons -->
    <link href="assets/img/favicon.png" rel="icon">
    <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com" rel="preconnect">
    <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;1,300;1,400;1,500;1,600;1,700;1,800&family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet">

    <!-- Vendor CSS Files -->
    <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
    <link href="assets/vendor/aos/aos.css" rel="stylesheet">
    <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
    <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

    <!-- Main CSS File -->
    <link href="assets/css/main.css" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/globals.css" />
    <link rel="stylesheet" href="assets/css/style.css" />
    <link rel="stylesheet" href="assets/css/report.css" />
    <link rel="stylesheet" href="assets/css/report2.css" />
    <link href="assets/css/main.css" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/global1.css" />
    <link rel="stylesheet" href="assets/css/style1.css" />
    <link rel="stylesheet" href="assets/css/page.css" />


</head>

<header id="header" class="header d-flex align-items-center sticky-top">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js"></script>

    <div class="container-fluid container-xl position-relative d-flex align-items-center">

        <a href="index.html" class="logo d-flex align-items-center">
            <img src="assets/img/logo.png" alt="">
        </a>
        <h5 class="ms-3">Product Inspectation</h1>

            <nav id="navmenu" class="navmenu">
                <ul>
                    <link rel="stylesheet" href="style.css">
                    <li><a href="index.html#hero" class="">Home</a></li>
                    <li><a href="index.html#about">About</a></li>
                    <li><a href="index.html#ourservices">Our Services</a></li>
                    <li><a href="index.html#portfolio">Our Testimonials</a></li>
                    <li><a href="index.html#getaqoute">Get a Quote</a></li>
                </ul>
                <!-- <i class="mobile-nav-toggle d-xl-none bi bi-list"></i> -->
            </nav>
    </div>
</header>

<body style="background-color: #ffffff;">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <!-- Then load jsPDF-AutoTable -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js"></script>
    <div class="header-container" style="margin-top: 0px;">
        <h2 class="header-text">VCRA PRODUCT INSPECTION REPORT</h2>
    </div>


    <div style="width: 894px; margin: 0 auto;">

        <main>
            <form id="inspectionForm">
                <label for="vendor">Vendor</label>
                <input type="text" id="vendor" name="vendor">

                <label for="date">Date</label>
                <input type="date" id="date" name="date">

                <label for="location">Inspection Location</label>
                <input type="text" id="location" name="location">

                <label for="product">Product</label>
                <input type="text" id="product" name="product">

                <label for="country">Country Of Origin</label>
                <input type="text" id="country" name="country">

                <label for="shipment">Shipment Quantity</label>
                <input type="number" id="shipment" name="shipment">

                <label for="order">Order Quantity</label>
                <input type="number" id="order" name="order">
            </form>

            
            <div style="margin: 0 auto; padding: 20px; display: grid; width: 860px; justify-items: center;">
                <table class="form-table" id="sizeColorTable" style="margin-left: 0px;">
                    <tr>
                        <th style="font-weight: bold;font-size: 14px; text-align: center;">Production Order Number</th>
                        <th style="font-weight: bold;font-size: 14px; text-align: center;">Color</th>
                        <th style="font-weight: bold;font-size: 14px;"></th>
                    </tr>
                    <tr>
                        <td><input type="text"></td>
                        <td><input type="text"></td>
                        <td><input type="text"></td>
                    </tr>
                    <tr>
                        <td><input type="text"></td>
                        <td><input type="text"></td>
                        <td><input type="text"></td>
                    </tr>
                    <tr>
                        <td><input type="text"></td>
                        <td><input type="text"></td>
                        <td><input type="text"></td>
                    </tr>
                    <tr>
                        <td><input type="text"></td>
                        <td><input type="text"></td>
                        <td><input type="text"></td>
                    </tr>
                </table>
                <!-- <button class="add-button" style="margin-top: 30px;">Add new</button> -->
            </div>

            <div class="footer-text" style="text-align: center; margin-bottom: 40px; margin-top: 40px;">
                Inspection Standard used for this audit is based on AQL US Standards
                (ANSI/ASQC21.4;NF06-022;BS6001;DIN40080)
                Single sampling plan for general inspection (LEVEL 11)
            </div>
    </div>

    <div class="header-container">
        <h2 class="header-text">Size Color Breakdown by P/O</h2>
    </div>
    <div style="width: 800px; margin: 0 auto;">
        <!-- Third Form -->
        <form id="thirdform">
            <div style="display: grid;">
                <table style="margin: 0 auto; border: none;">
                    <tr>
                        <td>
                            <label style="font-size: 15px; padding-top: 14px;" for="aql-level">AQL LEVEL USED</label>
                        </td>
                        <td>
                            <input type="text" id="aql-level" name="aql-level">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label style="font-size: 15px; padding-top: 14px;" for="sample-size">SAMPLE SIZE
                                SELECTED</label>
                        </td>
                        <td>
                            <input type="text" id="sample-size" name="sample-size">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label style="font-size: 15px; padding-top: 14px;" for="cartons-selected">NO OF CARTONS
                                SELECTED</label>
                        </td>
                        <td>
                            <input type="text" id="cartons-selected" name="cartons-selected">
                        </td>
                    </tr>
                </table>
                <!-- <div class="button class" style="text-align: right; margin-top: 20px; margin-right: 11px;">
            <button class="upload-button" style="padding-inline: 40px;" type="button" onclick="generatePDF()">Submit</button>
        </div> -->
            </div>
        </form>
    </div>
</body>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Verification Form</title>
    <!-- <link rel="stylesheet" href="assets/css/report3.css"> -->
</head>

<body>
    <div class="header-container">
        <h2 class="header-text">Product Pictures</h2>
    </div>
    <!-- Main container for images and their comment boxes -->
    <div class="container-images">
        <section class="product-pictures">
            <div class="image-upload" id="imageUploadContainer">
                <!-- Initial Image upload card -->
                <div class="card-container">
                    <div class="card" onclick="document.getElementById('input-file1').click()" style="width: 200px; height: 200px; border: 1px solid #ccc;">
                        <img src="" id="image1" alt="Preview Image" style="width: 100%; height: 100%; object-fit: cover; display: none;">
                    </div>
                    <input type="file" accept="image/*" id="input-file1" style="display: none;">
                    <textarea id="comment1" placeholder="Add a note..." style="width: 200px; height: 50px; margin-top: 10px;"></textarea>
                </div>
            </div>
            <button class="upload-button" onclick="addNewUpload()">Add New</button>
            <button class="upload-button" onclick="uploadImages()">Upload Images</button>
        </section>
    </div>
    
    <script>
        let uploadCount = 1; // Starting from 1 since we have an initial image upload section
    
        // Function to handle adding new image upload cards
        function addNewUpload() {
            uploadCount++; // Increment the counter for unique IDs
    
            // Get the container for image uploads
            const container = document.getElementById('imageUploadContainer');
        
            // Create a new card container div
            const newCardContainer = document.createElement('div');
            newCardContainer.classList.add('card-container');
        
            // Create a new card div
            const newCard = document.createElement('div');
            newCard.classList.add('card');
            newCard.style.width = '200px';
            newCard.style.height = '200px';
            newCard.style.border = '1px solid #ccc';
            newCard.style.cursor = 'pointer'; // Make it look clickable
        
            // Create a new img tag for the preview
            const newImg = document.createElement('img');
            newImg.id = `image${uploadCount}`;
            newImg.alt = `Preview Image ${uploadCount}`;
            newImg.style.width = '100%';
            newImg.style.height = '100%';
            newImg.style.objectFit = 'cover';
            newImg.style.display = 'none'; // Hidden until an image is uploaded
        
            // Create a new input file element
            const newInput = document.createElement('input');
            newInput.type = 'file';
            newInput.accept = 'image/*';
            newInput.id = `input-file${uploadCount}`;
            newInput.style.display = 'none'; // Hide the input element
        
            // Click the file input when the card is clicked
            newCard.addEventListener('click', function() {
                newInput.click(); // Open file input when the card is clicked
            });
        
            // Append the img and input elements to the new card
            newCard.appendChild(newImg);
            newCard.appendChild(newInput);
        
            // Create a new textarea for the comment
            const newCommentBox = document.createElement('textarea');
            newCommentBox.id = `comment${uploadCount}`;
            newCommentBox.placeholder = 'Add a note...';
            newCommentBox.style.width = '200px';
            newCommentBox.style.height = '50px';
            newCommentBox.style.marginTop = '10px';
        
            // Append the card and comment box to the card container
            newCardContainer.appendChild(newCard);
            newCardContainer.appendChild(newCommentBox);
        
            // Append the new card container to the main container
            container.appendChild(newCardContainer);
        
            // Handle the image preview
            newInput.addEventListener('change', function(event) {
                handleFileSelect(event, newImg);
            });
        }
    
        // Function to handle file selection and image preview
        function handleFileSelect(event, imgElement) {
            const file = event.target.files[0];
            if (file && file.type.startsWith('image/')) {
                const imageURL = URL.createObjectURL(file);
                imgElement.src = imageURL;
                imgElement.style.display = 'block'; // Show the image
                imgElement.onload = function() {
                    URL.revokeObjectURL(imgElement.src); // Free memory once the image is loaded
                };
            } else {
                alert('Please select a valid image file.');
            }
        }
    
        let image1 = document.getElementById('image1');
        let inputfile1 = document.getElementById('input-file1');
    
        // Log to confirm script is running
        console.log("Script loaded successfully");
    
        // Handle the first image input
        inputfile1.onchange = function() {
            if (inputfile1.files && inputfile1.files.length > 0) {
                const file = inputfile1.files[0];
    
                if (!file.type.startsWith('image/')) {
                    alert('Please select a valid image file.');
                    return;
                }
    
                const imageURL = URL.createObjectURL(file);
                image1.src = imageURL;
                image1.style.display = 'block'; // Ensure the image is shown
                image1.onload = function() {
                    URL.revokeObjectURL(image1.src); // Free up memory after the image is loaded
                };
            } else {
                alert('No file selected or invalid file.');
            }
        };
    </script>
    
    <div class="header-container">
        <h2 class="header-text">Product Details </h2>
    </div>
    <div style="display: flex; justify-content: center;">
    <section class="product-details-verification" style="display: grid; width: 894px; margin: 0 auto;">
        <table style="width: 100%; margin: 0 auto;">

            <thead>
                <tr>
                    <th>Description</th>
                    <th style="color: lightgreen; text-align: center;">Confirm</th>
                    <th style="color: red;text-align: center;">Not Confirm</th>
                    <th style="color: black;text-align: center;">N/A</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Carton Markings</td>
                    <td style="text-align: center;"><input type="radio" name="jokerTag1" value="confirm"></td>
                    <td style="text-align: center;"><input type="radio" name="jokerTag1" value="notConfirm"></td>
                    <td style="text-align: center;"><input type="radio" name="jokerTag1" value="na"></td>
                </tr>
                <tr>
                    <td>Inner Box Printing</td>
                    <td style="text-align: center;"><input type="radio" name="jokerTag2" value="confirm"></td>
                    <td style="text-align: center;"><input type="radio" name="jokerTag2" value="notConfirm"></td>
                    <td style="text-align: center;"><input type="radio" name="jokerTag2" value="na"></td>
                </tr>
                <tr>
                    <td>Polybags Information / Warning</td>
                    <td style="text-align: center;"><input type="radio" name="jokerTag3" value="confirm"></td>
                    <td style="text-align: center;"><input type="radio" name="jokerTag3" value="notConfirm"></td>
                    <td style="text-align: center;"><input type="radio" name="jokerTag3" value="na"></td>
                </tr>
                <tr>
                    <td>Other Labels</td>
                    <td style="text-align: center;"><input type="radio" name="jokerTag4" value="confirm"></td>
                    <td style="text-align: center;"><input type="radio" name="jokerTag4" value="notConfirm"></td>
                    <td style="text-align: center;"><input type="radio" name="jokerTag4" value="na"></td>
                </tr>
                <tr>
                    <td>Hang Tags / Bar Codes</td>
                    <td style="text-align: center;"><input type="radio" name="jokerTag5" value="confirm"></td>
                    <td style="text-align: center;"><input type="radio" name="jokerTag5" value="notConfirm"></td>
                    <td style="text-align: center;"><input type="radio" name="jokerTag5" value="na"></td>
                </tr>
                <tr>
                    <td>Main Label</td>
                    <td style="text-align: center;"><input type="radio" name="jokerTag6" value="confirm"></td>
                    <td style="text-align: center;"><input type="radio" name="jokerTag6" value="notConfirm"></td>
                    <td style="text-align: center;"><input type="radio" name="jokerTag6" value="na"></td>
                </tr>
                <tr>
                    <td>Care / Content Labels</td>
                    <td style="text-align: center;"><input type="radio" name="jokerTag7" value="confirm"></td>
                    <td style="text-align: center;"><input type="radio" name="jokerTag7" value="notConfirm"></td>
                    <td style="text-align: center;"><input type="radio" name="jokerTag7" value="na"></td>
                </tr>
                <tr>
                    <td>Size Labels</td>
                    <td style="text-align: center;"><input type="radio" name="jokerTag8" value="confirm"></td>
                    <td style="text-align: center;"><input type="radio" name="jokerTag8" value="notConfirm"></td>
                    <td style="text-align: center;"><input type="radio" name="jokerTag8" value="na"></td>
                </tr>
                <tr>
                    <td>Tracking Labels</td>
                    <td style="text-align: center;"><input type="radio" name="jokerTag9" value="confirm"></td>
                    <td style="text-align: center;"><input type="radio" name="jokerTag9" value="notConfirm"></td>
                    <td style="text-align: center;"><input type="radio" name="jokerTag9" value="na"></td>
                </tr>
                <tr>
                    <td>Distribution Labels / Bar Codes</td>
                    <td style="text-align: center;"><input type="radio" name="jokerTag77" value="confirm"></td>
                    <td style="text-align: center;"><input type="radio" name="jokerTag77" value="notConfirm"></td>
                    <td style="text-align: center;"><input type="radio" name="jokerTag77" value="na"></td>
                </tr>
            </tbody>
        </table>
    </section>
</div>

    <div class="header-container" style="margin-top: 0;">
        <h2 class="header-text">Measurement Verification Sheet</h2>
    </div>

    <section class="measurement-verification" style="display: grid; margin: 0 auto; padding-top: 40px; width: 894px;">

        <table id="dynamicTable1" style="width: 100%; margin: 0 auto; table-layout: fixed;">
            <colgroup>
                <col style="width: 40%;">
                <col style="width: 15%;">
                <col style="width: 15%;">
                <col style="width: 15%;">
                <col style="width: 15%;">
            </colgroup>
            <thead>
                <tr>
                    <th>Point of Measure</th>
                    <th>Specs</th>
                    <th class="empty-column"></th>
                    <th class="empty-column"></th>
                    <th class="empty-column"></th>
                </tr>
            </thead>
            <tbody>
                <!-- Initial Row -->
                <tr>
                    <td><input type="text"></td>
                    <td><input type="text"></td>
                    <td><input type="text"></td>
                    <td><input type="text"></td>
                    <td><input type="text"></td>
                </tr>
            </tbody>
        </table>
        
        
        <div style="margin-left: 0px;; margin-top: 10px;">
            <button onclick="addRowT1()">Add new</button>
        </div>
        </table>
    </section>

    <div class="header-container" style="margin-top: 0;">
        <h2 class="header-text">Quality Check List On Material & Workmanship</h2>
    </div>


    <section class="quality-checklist" style="padding-top: 0;">
    </div>
    <div style="width: 894px; margin-left: 310px;">
    <table id="dynamicTable2" style="width: 100%; margin: 0 auto;">
        <colgroup>
            <col style="width: 40%;">
            <col style="width: 20%;">
            <col style="width: 20%;">
            <col style="width: 20%;">
        </colgroup>

        <thead>
            <tr>
                <th>Material & Workmanship Details</th>
                <th>Critical</th>
                <th>Major</th>
                <th>Minor</th>
            </tr>
        </thead>
        <tbody>
            <!-- Initial Row -->
            <tr>
                <td><input type="text"></td>
                <td><input type="text" class="critical" oninput="calculateTotals()"></td>
                <td><input type="text" class="major" oninput="calculateTotals()"></td>
                <td><input type="text" class="minor" oninput="calculateTotals()"></td>
            </tr>
        </tbody>
        <tfoot>
            <tr>
                <td style="color: red;">Total</td>
                <td id="criticalTotal" style="color: red;">0</td>
                <td id="majorTotal" style="color: red;">0</td>
                <td id="minorTotal" style="color: red;">0</td>
            </tr>
        </tfoot>
    </table>
</div>
    
    <div style="margin-left: 310px;; margin-top: 10px;">
        <button onclick="addRowT2()">Add new</button>
    </div>
    <script>
        document.getElementById('addRowButton').addEventListener('click', function () {
        var table = document.getElementById('qualityTable');
        var newRow = table.insertRow(-1); // Adds a new row at the end of the table

        // First cell (width: 180px)
        var cell1 = newRow.insertCell(0);
        cell1.style.padding = "10px";
        cell1.style.border = "1px solid #ddd";
        var input1 = document.createElement('input');
        input1.type = 'text';
        input1.style.width = '180px';
        input1.style.padding = '8px';
        input1.style.border = '1px solid #ddd';
        input1.style.borderRadius = '4px';
        input1.style.marginBottom = '0';
        cell1.appendChild(input1);

        // Second cell (colspan=2, width: 180px)
        var cell2 = newRow.insertCell(1);
        cell2.colSpan = 2;
        cell2.style.padding = "10px";
        cell2.style.border = "1px solid #ddd";
        var input2 = document.createElement('input');
        input2.type = 'text';
        input2.style.width = '180px';
        input2.style.padding = '8px';
        input2.style.border = '1px solid #ddd';
        input2.style.borderRadius = '4px';
        input2.style.marginBottom = '0';
        cell2.appendChild(input2);

            // Remaining cells (width: 100%) - 6 cells
            for (var i = 2; i < 9; i++) {
                var cell = newRow.insertCell(i);
                cell.style.padding = "10px";
                cell.style.border = "1px solid #ddd";
                var input = document.createElement('input');
                input.type = 'text';
                input.style.width = '100%';
                input.style.padding = '8px';
                input.style.border = '1px solid #ddd';
                input.style.borderRadius = '4px';
                input.style.marginBottom = '0';
                cell.appendChild(input);
            }
        }); 


    </script>
        
    </section>

    <section style="padding: 0;">
        <div class="HOME" style="">
            <div class="div">
                <div class="rectangle"></div>
                <div class="rectangle-2"></div>
                <!-- <img class="rectangle-3" src="img/rectangle-59.png" /> -->
                <div class="header-container">
                    <h2 class="header-text">Appearance and Packing </h2>
                </div>
                
                <div style="display: flex; justify-content: center;">
                    <section class="product-details-verification" style="display: grid;  margin: 0 auto;">
                        <div class="group-3 " style="width: 894px; margin-left: 180px; ">
                            <form id="form1111" style="margin: 0 auto;">
                            
                                
                            <table style="width: 894px; margin:0 auto; width: 100%; margin-left: 0;">
                                <tr>
                                    <th></th>
                                    <th style="color: lightgreen; text-align: center;">Confirm</th>
                                    <th style="color: red; text-align: center;">Not Confirm</th>
                                    <th style="color: black; text-align: center;">N/A</th>
                                    <th>Comments</th>
                                </tr>
                                <tr>
                                    <td>Label Position</td>
                                    <td style="text-align: center;"><input type="radio" name="labelPosition"
                                            value="confirm"></td>
                                    <td style="text-align: center;"><input type="radio" name="labelPosition"
                                            value="notConfirm"></td>
                                    <td style="text-align: center;"><input type="radio" name="labelPosition" value="na">
                                    </td>
                                    <td style="text-align: center;"><input type="text" name="labelPositionComments"
                                            class="comments"></td>
                                </tr>
                                <tr>
                                    <td>Hang Tag Position</td>
                                    <td style="text-align: center;"><input type="radio" name="hangTagPosition"
                                            value="confirm"></td>
                                    <td style="text-align: center;"><input type="radio" name="hangTagPosition"
                                            value="notConfirm"></td>
                                    <td style="text-align: center;"><input type="radio" name="hangTagPosition"
                                            value="na"></td>
                                    <td><input type="text" name="hangTagPositionComments" class="comments"></td>
                                </tr>
                                <tr>
                                    <td>Joker Tag</td>
                                    <td style="text-align: center;"><input type="radio" name="jokerTag" value="confirm">
                                    </td>
                                    <td style="text-align: center;"><input type="radio" name="jokerTag"
                                            value="notConfirm"></td>
                                    <td style="text-align: center;"><input type="radio" name="jokerTag" value="na"></td>
                                    <td><input type="text" name="jokerTagComments" class="comments"></td>
                                </tr>
                                <tr>
                                    <td>Packed Quantity</td>
                                    <td style="text-align: center;"><input type="radio" name="packedQuantity"
                                            value="confirm"></td>
                                    <td style="text-align: center;"><input type="radio" name="packedQuantity"
                                            value="notConfirm"></td>
                                    <td style="text-align: center;"><input type="radio" name="packedQuantity"
                                            value="na"></td>
                                    <td><input type="text" name="packedQuantityComments" class="comments"></td>
                                </tr>
                                <tr>
                                    <td>Folding Size</td>
                                    <td style="text-align: center;"><input type="radio" name="foldingSize"
                                            value="confirm"></td>
                                    <td style="text-align: center;"><input type="radio" name="foldingSize"
                                            value="notConfirm"></td>
                                    <td style="text-align: center;"><input type="radio" name="foldingSize" value="na">
                                    </td>
                                    <td><input type="text" name="foldingSizeComments" class="comments"></td>
                                </tr>
                                <tr>
                                    <td>Color Assortment</td>
                                    <td style="text-align: center;"><input type="radio" name="colorAssortment"
                                            value="confirm"></td>
                                    <td style="text-align: center;"><input type="radio" name="colorAssortment"
                                            value="notConfirm"></td>
                                    <td style="text-align: center;"><input type="radio" name="colorAssortment"
                                            value="na"></td>
                                    <td><input type="text" name="colorAssortmentComments" class="comments"></td>
                                </tr>
                                <tr>
                                    <td>Size Ratio</td>
                                    <td style="text-align: center;"><input type="radio" name="sizeRatio"
                                            value="confirm"></td>
                                    <td style="text-align: center;"><input type="radio" name="sizeRatio"
                                            value="notConfirm"></td>
                                    <td style="text-align: center;"><input type="radio" name="sizeRatio" value="na">
                                    </td>
                                    <td><input type="text" name="sizeRatioComments" class="comments"></td>
                                </tr>
                                <tr>
                                    <td>Shipping Marks</td>
                                    <td style="text-align: center;"><input type="radio" name="shippingMarks"
                                            value="confirm"></td>
                                    <td style="text-align: center;"><input type="radio" name="shippingMarks"
                                            value="notConfirm"></td>
                                    <td style="text-align: center;"><input type="radio" name="shippingMarks" value="na">
                                    </td>
                                    <td><input type="text" name="shippingMarksComments" class="comments"></td>
                                </tr>
                                <tr>
                                    <td>Cartons Conditions</td>
                                    <td style="text-align: center;"><input type="radio" name="cartonsConditions"
                                            value="confirm"></td>
                                    <td style="text-align: center;"><input type="radio" name="cartonsConditions"
                                            value="notConfirm"></td>
                                    <td style="text-align: center;"><input type="radio" name="cartonsConditions"
                                            value="na"></td>
                                    <td><input type="text" name="cartonsConditionsComments" class="comments"></td>
                                </tr>
                            </table>

                        </form>
                    </div>
                    </div>
                    
            </div>
        </section>
        </div>
        

        <div class="HOME">
            <div class="div">
                <div class="rectangle"></div>
                <div class="rectangle-2"></div>
                <div class="header-container">
                    <h2 class="header-text">Material </h2>
                </div>

                <div style="display: flex; justify-content: center;">
    
                <div class="group-3 " style="width: 894px; margin-left: 180px; ">
                    <form id="formmaterial">
                        <table style="margin:0 auto; width: 100%; margin-left: 0;border: none;">
                            <tr>
                                <th></th>
                                <th style="color: lightgreen; text-align: center;">Confirm</th>
                                <th style="color: red; text-align: center;">Not Confirm</th>
                                <th style="color: black; text-align: center;">N/A</th>
                                <th>Comments</th>
                            </tr>
                            <tr>
                                <td>Hand Feel</td>
                                <td style="text-align: center;"><input type="radio" name="labelPosition"
                                        value="confirm"></td>
                                <td style="text-align: center;"><input type="radio" name="labelPosition"
                                        value="notConfirm"></td>
                                <td style="text-align: center;"><input type="radio" name="labelPosition" value="na">
                                </td>
                                <td><input type="text" name="labelPositionComments" class="comments"></td>
                            </tr>
                            <tr>
                                <td>Average Garment Weight</td>
                                <td style="text-align: center;"><input type="radio" name="hangTagPosition"
                                        value="confirm"></td>
                                <td style="text-align: center;"><input type="radio" name="hangTagPosition"
                                        value="notConfirm"></td>
                                <td style="text-align: center;"><input type="radio" name="hangTagPosition" value="na">
                                </td>
                                <td><input type="text" name="hangTagPositionComments" class="comments"></td>
                            </tr>
                            <tr>
                                <td>Knitting Guage</td>
                                <td style="text-align: center;"><input type="radio" name="jokerTag" value="confirm">
                                </td>
                                <td style="text-align: center;"><input type="radio" name="jokerTag" value="notConfirm">
                                </td>
                                <td style="text-align: center;"><input type="radio" name="jokerTag" value="na"></td>
                                <td><input type="text" name="jokerTagComments" class="comments"></td>
                            </tr>
                            <tr>
                                <td>Knitting Ends</td>
                                <td style="text-align: center;"><input type="radio" name="packedQuantity"
                                        value="confirm"></td>
                                <td style="text-align: center;"><input type="radio" name="packedQuantity"
                                        value="notConfirm"></td>
                                <td style="text-align: center;"><input type="radio" name="packedQuantity" value="na">
                                </td>
                                <td><input type="text" name="packedQuantityComments" class="comments"></td>
                            </tr>
                            <tr>
                                <td>Pattern/Design</td>
                                <td style="text-align: center;"><input type="radio" name="foldingSize" value="confirm">
                                </td>
                                <td style="text-align: center;"><input type="radio" name="foldingSize"
                                        value="notConfirm"></td>
                                <td style="text-align: center;"><input type="radio" name="foldingSize" value="na"></td>
                                <td><input type="text" name="foldingSizeComments" class="comments"></td>
                            </tr>
                            <tr>
                                <td>Fabric Weight</td>
                                <td style="text-align: center;"><input type="radio" name="colorAssortment"
                                        value="confirm"></td>
                                <td style="text-align: center;"><input type="radio" name="colorAssortment"
                                        value="notConfirm"></td>
                                <td style="text-align: center;"><input type="radio" name="colorAssortment" value="na">
                                </td>
                                <td><input type="text" name="colorAssortmentComments" class="comments"></td>
                            </tr>
                            <tr>
                                <td>Color</td>
                                <td style="text-align: center;"><input type="radio" name="sizeRatio" value="confirm">
                                </td>
                                <td style="text-align: center;"><input type="radio" name="sizeRatio" value="notConfirm">
                                </td>
                                <td style="text-align: center;"><input type="radio" name="sizeRatio" value="na"></td>
                                <td><input type="text" name="sizeRatioComments" class="comments"></td>
                            </tr>
                        </table>

                    </form>
                </div>
                </div>
            
            </div>
        </div>
    </section>

    <section style="padding: 0;">
        <div class="HOME" >
            <div class="div">
                <div class="rectangle"></div>
                <div class="rectangle-2"></div>
                <!-- <img class="rectangle-3" src="img/rectangle-59.png" /> -->
                <div class="header-container">
                    <h2 class="header-text">Accesories & Trims</h2>
                </div>
                <div class="group-3" style= "margin: 0 auto; width: 894px; margin-left: 180px; ">
                    <form id="accessories-trims-form" style=" margin: 0 auto; ">
                        <table style="margin:0 auto; width: 100%; margin-left: 0;">
                            <tr>
                                <th></th>
                                <th style="color: lightgreen; text-align: center;">Confirm</th>
                                <th style="color: red; text-align: center;">Not Confirm</th>
                                <th style="color: black; text-align: center;">N/A</th>
                                <th>Comments</th>
                            </tr>
                            <tr>
                                <td>Main Label</td>
                                <td style="text-align: center;"><input type="radio" name="colorAssortment4"
                                        value="confirm"></td>
                                <td style="text-align: center;"><input type="radio" name="colorAssortment4"
                                        value="notConfirm"></td>
                                <td style="text-align: center;"><input type="radio" name="colorAssortment4" value="na">
                                </td>
                                <td><input type="text" name="labelPositionComments" class="comments"></td>
                            </tr>
                            <tr>
                                <td>Care Label</td>
                                <td style="text-align: center;"><input type="radio" name="colorAssortment5"
                                        value="confirm"></td>
                                <td style="text-align: center;"><input type="radio" name="colorAssortment5"
                                        value="notConfirm"></td>
                                <td style="text-align: center;"><input type="radio" name="colorAssortment5" value="na">
                                </td>
                                <td><input type="text" name="hangTagPositionComments" class="comments"></td>
                            </tr>
                            <tr>
                                <td>Hang Tag</td>
                                <td style="text-align: center;"><input type="radio" name="colorAssortment6"
                                        value="confirm"></td>
                                <td style="text-align: center;"><input type="radio" name="colorAssortment6"
                                        value="notConfirm"></td>
                                <td style="text-align: center;"><input type="radio" name="colorAssortment6" value="na">
                                </td>
                                <td><input type="text" name="jokerTagComments" class="comments"></td>
                            </tr>
                            <tr>
                                <td>Hanger</td>
                                <td style="text-align: center;"><input type="radio" name="colorAssortment7"
                                        value="confirm"></td>
                                <td style="text-align: center;"><input type="radio" name="colorAssortment7"
                                        value="notConfirm"></td>
                                <td style="text-align: center;"><input type="radio" name="colorAssortment7" value="na">
                                </td>
                                <td><input type="text" name="packedQuantityComments" class="comments"></td>
                            </tr>
                            <tr>
                                <td>Polybags</td>
                                <td style="text-align: center;"><input type="radio" name="colorAssortment8"
                                        value="confirm"></td>
                                <td style="text-align: center;"><input type="radio" name="colorAssortment8"
                                        value="notConfirm"></td>
                                <td style="text-align: center;"><input type="radio" name="colorAssortment8" value="na">
                                </td>
                                <td><input type="text" name="foldingSizeComments" class="comments"></td>
                            </tr>
                            <tr>
                                <td>Shoulder pads</td>
                                <td style="text-align: center;"><input type="radio" name="colorAssortment9"
                                        value="confirm"></td>
                                <td style="text-align: center;"><input type="radio" name="colorAssortment9"
                                        value="notConfirm"></td>
                                <td style="text-align: center;"><input type="radio" name="colorAssortment9" value="na">
                                </td>
                                <td><input type="text" name="colorAssortmentComments" class="comments"></td>
                            </tr>
                            <tr>
                                <td>Button/snap</td>
                                <td style="text-align: center;"><input type="radio" name="colorAssortment10"
                                        value="confirm"></td>
                                <td style="text-align: center;"><input type="radio" name="colorAssortment10"
                                        value="notConfirm"></td>
                                <td style="text-align: center;"><input type="radio" name="colorAssortment10" value="na">
                                </td>
                                <td><input type="text" name="sizeRatioComments" class="comments"></td>
                            </tr>
                            <tr>
                                <td>Zipper</td>
                                <td style="text-align: center;"><input type="radio" name="colorAssortment11"
                                        value="confirm"></td>
                                <td style="text-align: center;"><input type="radio" name="colorAssortment11"
                                        value="notConfirm"></td>
                                <td style="text-align: center;"><input type="radio" name="colorAssortment11" value="na">
                                </td>
                                <td><input type="text" name="shippingMarksComments" class="comments"></td>
                            </tr>
                            <tr>
                                <td>Lining</td>
                                <td style="text-align: center;"><input type="radio" name="colorAssortment12"
                                        value="confirm"></td>
                                <td style="text-align: center;"><input type="radio" name="colorAssortment12"
                                        value="notConfirm"></td>
                                <td style="text-align: center;"><input type="radio" name="colorAssortment12" value="na">
                                </td>
                                <td><input type="text" name="cartonsConditionsComments" class="comments"></td>
                            </tr>
                            <tr>
                                <td>InterLining</td>
                                <td style="text-align: center;"><input type="radio" name="colorAssortment13"
                                        value="confirm"></td>
                                <td style="text-align: center;"><input type="radio" name="colorAssortment13"
                                        value="notConfirm"></td>
                                <td style="text-align: center;"><input type="radio" name="colorAssortment13" value="na">
                                </td>
                                <td><input type="text" name="cartonsConditionsComments" class="comments"></td>
                            </tr>
                            <tr>
                                <td>Heat Transfer / Logos</td>
                                <td style="text-align: center;"><input type="radio" name="colorAssortment14"
                                        value="confirm"></td>
                                <td style="text-align: center;"><input type="radio" name="colorAssortment14"
                                        value="notConfirm"></td>
                                <td style="text-align: center;"><input type="radio" name="colorAssortment14" value="na">
                                </td>
                                <td><input type="text" name="cartonsConditionsComments" class="comments"></td>
                            </tr>
                        </table>

                    </form>
                </div>
            </div>
        </div>

        <div class="HOME">
            <div class="div">
                <div class="rectangle"></div>
                <div class="rectangle-2"></div>
                <div class="group-3aaa" style="width: 894px; margin-left: 180px;">
                    <form>
                        <table style="margin:0 auto; width: 100%; margin-left: 0;border-color: white;">
                            <tr>
                                <th></th>
                                <th style="color: lightgreen; text-align: center;">Confirm</th>
                                <th style="color: red; text-align: center;">Not Confirm</th>
                                <th style="color: black; text-align: center;">N/A</th>
                                <th>Comments</th>
                            </tr>
                            <tr>
                                <td>Workmanship</td>
                                <td style="text-align: center;"><input type="radio" name="colorAssortment1"
                                        value="confirm"></td>
                                <td style="text-align: center;"><input type="radio" name="colorAssortment1"
                                        value="notConfirm"></td>
                                <td style="text-align: center;"><input type="radio" name="colorAssortment1" value="na">
                                </td>
                                <td><input type="text" name="labelPositionComments" class="comments"></td>
                            </tr>
                            <tr>
                                <td>Measurements</td>
                                <td style="text-align: center;"><input type="radio" name="colorAssortment2"
                                        value="confirm"></td>
                                <td style="text-align: center;"><input type="radio" name="colorAssortment2"
                                        value="notConfirm"></td>
                                <td style="text-align: center;"><input type="radio" name="colorAssortment2" value="na">
                                </td>
                                <td><input type="text" name="hangTagPositionComments" class="comments"></td>
                            </tr>
                            <tr>
                                <td>Testing</td>
                                <td style="text-align: center;"><input type="radio" name="colorAssortment3"
                                        value="confirm"></td>
                                <td style="text-align: center;"><input type="radio" name="colorAssortment3"
                                        value="notConfirm"></td>
                                <td style="text-align: center;"><input type="radio" name="colorAssortment3" value="na">
                                </td>
                                <td><input type="text" name="jokerTagComments" class="comments"></td>
                            </tr>

                        </table>

                    </form>
                </div>
            </div>
        </div>
    </section>
    
    <section class="Inspection-Result" style="padding-top: 0;">
        <div class="header-container" style="margin-top:0;">
            <h2 class="header-text">Inspection Result</h2>
        </div>

        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>Button Group</title>

        </head>

        <div class="button-group" style="justify-content: center;">
            <button class="confirm">
                <input type="radio" name="option"> CONFIRM
            </button>
            <button class="not-confirm">
                <input type="radio" name="option"> NOT CONFIRM
            </button>
            <button class="hold">
                <input type="radio" name="option"> HOLD
            </button>
        </div>
        <div class="button class" style="text-align: right; width: 78%; margin: 0 auto; margin-top: 80px;">
            <button class="upload-button" style="padding-inline: 40px;" onclick="generatePDF()">Submit</button>
        </div>

        <footer style="border-top: 1px solid #cdcdcd; width:80% ; margin: 0 auto; margin-top: 80px;">

            <div style=" margin: 0 auto; text-align: center; padding-bottom: 40px; margin-top:40px ;">
                <p> <span>Copyright</span> <strong class="px-1">VCRA</strong> <span>All Rights Reserved</span></p>

            </div>

        </footer>

        <script>
            let uploadCount = 0; // Initialize the upload count
            
            function addNewUpload() {
                uploadCount++;
                const container = document.getElementById('imageUploadContainer');
            
                // Create new card container
                const newCardContainer = document.createElement('div');
                newCardContainer.classList.add('card-container');
            
                // Create new card div
                const newCard = document.createElement('div');
                newCard.classList.add('card');
                newCard.style.width = '200px';
                newCard.style.height = '200px';
                newCard.style.border = '1px solid #ccc';
                newCard.style.cursor = 'pointer'; // Make it look clickable
            
                // Create new img tag (for preview)
                const newImg = document.createElement('img');
                newImg.id = `image${uploadCount}`;
                newImg.alt = `Preview Image ${uploadCount}`;
                newImg.style.width = '100%';
                newImg.style.height = '100%';
                newImg.style.objectFit = 'cover';
                newImg.style.display = 'none'; // Hidden until an image is uploaded
            
                // Create new input file element
                const newInput = document.createElement('input');
                newInput.type = 'file';
                newInput.accept = 'image/*';
                newInput.id = `input-file${uploadCount}`;
                newInput.style.display = 'none'; // Hide the input element
            
                // Direct click on file input
                newCard.addEventListener('click', function() {
                    newInput.click(); // Open file input when the card is clicked
                });
            
                // Append img and input to the new card
                newCard.appendChild(newImg);
                newCard.appendChild(newInput);
            
                // Append the new card to the card container
                newCardContainer.appendChild(newCard);
            
                // Append the new card container to the main container
                container.appendChild(newCardContainer);
            
                // Call the preview function when a file is selected
                newInput.addEventListener('change', function(event) {
                    handleFileSelect(event, newImg);
                });
            }
            
            // Handle file selection and preview
            function handleFileSelect(event, imgElement) {
                const input = event.target;
                const file = input.files[0];
            
                if (!file) {
                    console.error('No file selected');
                    return;
                }
            
                // Log selected file
                console.log('Selected Image:', file);
            
                const reader = new FileReader();
            
                reader.onload = function(e) {
                    imgElement.src = e.target.result;
                    imgElement.style.display = 'block'; // Show the image once it's loaded
                    console.log('Image preview loaded');
                };
            
                reader.onerror = function() {
                    console.error('Error reading file');
                };
            
                reader.readAsDataURL(file); // Convert the file to a data URL
                console.log('Reading file...');
            }
            </script>
            
            
            
            
                <!-- Font Awesome for the icons (optional) -->
                <script src="https://kit.fontawesome.com/a076d05399.js"></script>
                <script src="assets/js/main.js"></script>
                <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
                <!-- Then load jsPDF-AutoTable -->
                <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js"></script>
                <!-- Your custom scripts -->
                <script src="assets/js/main.js"></script>
                <script src="assets/js/dynamicTable.js"></script>
                <script>
            
                async function generatePDF() {
                    const { jsPDF } = window.jspdf;
                    const doc = new jsPDF();

                    // Check if autoTable is available
                    if (typeof doc.autoTable !== 'function') {
                        console.error('autoTable is not a function. The plugin might not be loaded correctly.');
                        alert('PDF generation failed. Please check the console for more information.');
                        return;
                    }

                    const pageHeight = doc.internal.pageSize.height;
                    const pageWidth = doc.internal.pageSize.getWidth();
                    const margin = 20;
                    let y = margin;

                    function addSectionTitle(title) {
                        const titleHeight = 10; // Approximate height for the title

                        doc.setFontSize(18);
                        doc.setFont('helvetica', 'bold');
                        doc.text(title, pageWidth / 2, y, { align: 'center' });
                        y += titleHeight + 10;
                    }

                    function addTable(headers, rows) {
                        return new Promise((resolve) => {
                            const tableHeightEstimate = rows.length * 10 + 20; // Estimate table height
                            if (y + tableHeightEstimate > pageHeight - margin) {
                                doc.addPage();
                                y = margin;
                            }
                            doc.autoTable({
                                head: [headers],
                                body: rows,
                                startY: y,
                                theme: 'grid',
                                margin: { top: y },
                                didDrawPage: function (data) {
                                    y = data.cursor.y;
                                },
                                // After table is drawn, resolve the promise
                                willDrawCell: function () { },
                            });
                            y += 20; // Adjust spacing after table
                            resolve();
                        });
                    }

                    // Helper function to load image as Data URL
                    function loadImage(url) {
                        return new Promise((resolve, reject) => {
                            const img = new Image();
                            img.setAttribute('crossOrigin', 'anonymous'); // To avoid CORS issues
                            img.onload = () => {
                                resolve(img);
                            };
                            img.onerror = (err) => {
                                reject(err);
                            };
                            img.src = url;
                        });
                    }

                    // Helper function to read file as Data URL
                    function readFileAsDataURL(file) {
                        return new Promise((resolve, reject) => {
                            const reader = new FileReader();
                            reader.onload = function (e) {
                                resolve(e.target.result);
                            };
                            reader.onerror = function (err) {
                                reject(err);
                            };
                            reader.readAsDataURL(file);
                        });
                    }

                    // Add Logo
                    try {
                        const logoURL = 'assets/img/logo.png'; // Ensure this path is correct
                        const logoImg = await loadImage(logoURL);
                        const logoWidth = 40;
                        const logoHeight = 20;
                        doc.addImage(logoImg, 'PNG', (pageWidth / 2) - (logoWidth / 2), 10, logoWidth, logoHeight); // Centered
                        // Add Title
                        doc.setFontSize(20);
                        doc.setFont('helvetica', 'bold');
                        doc.text('VCRA PRODUCT INSPECTION REPORT', pageWidth / 2, 35, { align: 'center' });
                        y = 50;
                    } catch (error) {
                        console.error('Error loading logo image:', error);
                        alert('Failed to load logo image.');
                        return; // Exit the function if logo fails to load
                    }

                    // Function to collect form data as table rows
                    function collectFormData(formId, labelSelector = 'label[for="{key}"]') {
                        const form = document.getElementById(formId);
                        const formData = new FormData(form);
                        const formRows = [];
                        formData.forEach((value, key) => {
                            const label = form.querySelector(`label[for="${key}"]`)?.innerText || key;
                            formRows.push([label, value]);
                        });
                        return formRows;
                    }

                    // Function to collect table data
                    function collectTableData(tableSelector, skipHeader = true) {
                        const table = document.querySelector(tableSelector);
                        const tableRows = [];
                        if (table) {
                            const rows = table.getElementsByTagName('tr');
                            for (let i = skipHeader ? 1 : 0; i < rows.length; i++) {
                                const cells = rows[i].getElementsByTagName('td');
                                const rowData = [];
                                for (let j = 0; j < cells.length; j++) {
                                    const input = cells[j].querySelector('input');
                                    rowData.push(input ? input.value || '' : cells[j].innerText.trim());
                                }
                                tableRows.push(rowData);
                            }
                        } else {
                            console.error(`Table element "${tableSelector}" not found.`);
                        }
                        return tableRows;
                    }

                    // Start adding sections
                    try {
                        // First form
                        addSectionTitle('Inspection Form Details');
                        const formRows = collectFormData('inspectionForm');
                        await addTable(['Label', 'Value'], formRows);

                        // Second form
                        addSectionTitle('Size Color Breakdown by P/O');
                        const sizeColorRows = collectTableData('#sizeColorTable');
                        await addTable(['Production Order Number', 'Color', ''], sizeColorRows);

                        // Product Pictures Section
addSectionTitle('Product Pictures');

// Collect all uploaded images as Data URLs and comments
const uploadedImages = [];
const imageInputs = document.querySelectorAll('.image-upload input[type="file"]');
const comments = [];

// Loop through each image input to gather data
for (let input of imageInputs) {
    if (input.files && input.files[0]) {
        const file = input.files[0];
        const fileType = file.type;
        if (fileType === 'image/jpeg' || fileType === 'image/png') {
            try {
                const dataURL = await readFileAsDataURL(file);
                uploadedImages.push(dataURL);

                // Collect the associated comment for this image
                const commentBox = input.parentElement.querySelector('textarea');
                const commentText = commentBox ? commentBox.value.trim() : '';
                comments.push(commentText); // Store the comment
            } catch (err) {
                console.error('Error reading file:', err);
                alert('Error reading one of the image files.');
            }
        } else {
            console.error('Unsupported file type:', fileType);
            alert('Unsupported file type: ' + fileType + '. Only JPEG and PNG are supported.');
        }
    }
}

const fixedImageWidth = 100; // Set your fixed image width
const fixedImageHeight = 100; // Set your fixed image height
const bottomMargin = 20; // Space between images
const textMargin = 5; // Space between the image and the comment

// Function to add images sequentially (2 per row) along with comments
for (let imgIndex = 0; imgIndex < uploadedImages.length; imgIndex++) {
    try {
        const imgDataURL = uploadedImages[imgIndex];

        // Check if adding the image will overflow beyond the page height
        if (y + fixedImageHeight + textMargin + bottomMargin > pageHeight - margin) {
            doc.addPage(); // Add a new page
            y = margin; // Reset y position
        }

        // Calculate the X position for the image
        let xPosition;
        if (imgIndex % 2 === 0) {
            xPosition = (pageWidth / 4) - (fixedImageWidth / 2); // Left image position
        } else {
            xPosition = (3 * pageWidth / 4) - (fixedImageWidth / 2); // Right image position
        }

        // Determine image format (JPEG or PNG)
        const fileTypeMatch = imgDataURL.match(/^data:(image\/jpeg|image\/png);base64,/);
        const fileType = fileTypeMatch ? fileTypeMatch[1].split('/')[1].toUpperCase() : 'PNG'; // Default to PNG

        // Add the image to the PDF with the fixed width and height
        doc.addImage(imgDataURL, fileType, xPosition, y, fixedImageWidth, fixedImageHeight);

        // Add the associated comment directly below the image
        const comment = comments[imgIndex] || ''; // Default to an empty string if no comment is provided
        const commentYPosition = y + fixedImageHeight + textMargin; // Position comment directly below the image

        // Center the text under the image
        doc.text(comment, xPosition + fixedImageWidth / 2, commentYPosition, {
            align: "center"
        });

        // Adjust y-position for the next image and comment
        if (imgIndex % 2 === 1) {
            // Move down to the next row after two images
            y += fixedImageHeight + textMargin + bottomMargin; 
        }
    } catch (err) {
        console.error('Error adding image to PDF:', err);
        alert('Error adding one of the images to the PDF.');
    }
}

// Move down y position if there's an odd image
if (uploadedImages.length % 2 !== 0) {
    y += fixedImageHeight + textMargin + bottomMargin; // Add space for the last single image
}
                        // Third form
                        addSectionTitle('AQL and Cartons Details');
                        const thirdFormRows = collectFormData('thirdform');
                        await addTable(['Label', 'Value'], thirdFormRows);

                        // Fourth form
                        addSectionTitle('Product Details Verification');

const productDetailsForm = document.querySelector('.product-details-verification');
const productRows = [];

if (productDetailsForm) {
    const rows = productDetailsForm.querySelectorAll('table tr');
    rows.forEach(row => {
        const cells = row.querySelectorAll('td');
        const rowData = [];
        
        cells.forEach((cell, index) => {
            if (index === 0) {
                rowData.push(cell.textContent.trim()); // Description
            } else if (index >= 1 && index <= 3) { // Confirm, Not Confirm, N/A
                const input = cell.querySelector('input[type="radio"]:checked');
                rowData.push(input ? 'X' : '');
            }
        });
        
        if (rowData.length > 0) {
            productRows.push(rowData);
        }
    });
} else {
    console.error('Product Details form not found.');
}

await addTable(['Description', 'Confirm', 'Not Confirm', 'N/A'], productRows);

                        // Measurement Verification Sheet
                        addSectionTitle('Measurement Verification Sheet');
                        const measurementRows = collectTableData('#dynamicTable1');
                        await addTable(['Point of Measure', 'Specs', '', '', ''], measurementRows);

                        // Quality Check List On Material & Workmanship
                        addSectionTitle('Quality Check List On Material & Workmanship');
                        const qualityTable = document.querySelector('#dynamicTable2');
                        const qualityRows = [];
                        if (qualityTable) {
                            const rows = qualityTable.getElementsByTagName('tr');
                            for (let i = 1; i < rows.length - 1; i++) { // Skip header and footer
                                const cells = rows[i].getElementsByTagName('td');
                                const rowData = [];
                                for (let j = 0; j < cells.length; j++) {
                                    const input = cells[j].querySelector('input');
                                    rowData.push(input ? (input.checked ? 'X' : '') : cells[j].innerText.trim());
                                }
                                qualityRows.push(rowData);
                            }

                            // Add totals row
                            const criticalTotal = document.getElementById('criticalTotal')?.textContent || '';
                            const majorTotal = document.getElementById('majorTotal')?.textContent || '';
                            const minorTotal = document.getElementById('minorTotal')?.textContent || '';
                            qualityRows.push(['Total', criticalTotal, majorTotal, minorTotal]);
                        } else {
                            console.error('Quality table element not found.');
                        }
                        await addTable(['Material & Workmanship Details', 'Critical', 'Major', 'Minor'], qualityRows);

                        // Appearance and Packing form
                        addSectionTitle('Appearance and Packing');
                        const appearancePackingForm = document.querySelector('#form1111');
                        const appearancePackingRows = [];
                        if (appearancePackingForm) {
                            const rows = appearancePackingForm.querySelectorAll('table tr');
                            rows.forEach(row => {
                                const cells = row.querySelectorAll('td');
                                const rowData = [];
                                cells.forEach((cell, index) => {
                                    if (index === 0) {
                                        rowData.push(cell.textContent.trim());
                                    } else if (index >= 1 && index <= 3) {
                                        const input = cell.querySelector('input[type="radio"]:checked');
                                        rowData.push(input ? 'X' : '');
                                    } else {
                                        const comment = cell.querySelector('input[type="text"]')?.value || '';
                                        rowData.push(comment);
                                    }
                                });
                                if (rowData.length > 0) {
                                    appearancePackingRows.push(rowData);
                                }
                            });
                        } else {
                            console.error('Appearance and Packing form not found.');
                        }
                        await addTable(['Description', 'Confirm', 'Not Confirm', 'N/A', 'Comments'], appearancePackingRows);

                        // Material form
                        addSectionTitle('Material');
                        const materialForm = document.querySelector('#formmaterial');
                        const materialRows = [];
                        if (materialForm) {
                            const rows = materialForm.querySelectorAll('table tr');
                            rows.forEach(row => {
                                const cells = row.querySelectorAll('td');
                                const rowData = [];
                                cells.forEach((cell, index) => {
                                    if (index === 0) {
                                        rowData.push(cell.textContent.trim());
                                    } else if (index >= 1 && index <= 3) {
                                        const input = cell.querySelector('input[type="radio"]:checked');
                                        rowData.push(input ? 'X' : '');
                                    } else {
                                        const comment = cell.querySelector('input[type="text"]')?.value || '';
                                        rowData.push(comment);
                                    }
                                });
                                if (rowData.length > 0) {
                                    materialRows.push(rowData);
                                }
                            });
                        } else {
                            console.error('Material form not found.');
                        }
                        await addTable(['Description', 'Confirm', 'Not Confirm', 'N/A', 'Comments'], materialRows);

                        // Accessories & Trims Form
                        addSectionTitle('Accessories & Trims');
                        const accessoriesForm = document.querySelector('#accessories-trims-form');
                        const accessoriesRows = [];
                        if (accessoriesForm) {
                            const accessoriesRowsElements = accessoriesForm.querySelectorAll('tr');
                            accessoriesRowsElements.forEach(row => {
                                const description = row.querySelector('td')?.textContent.trim() || '';
                                if (description !== '') {
                                    const confirm = row.querySelector('input[value="confirm"]')?.checked ? 'X' : '';
                                    const notConfirm = row.querySelector('input[value="notConfirm"]')?.checked ? 'X' : '';
                                    const na = row.querySelector('input[value="na"]')?.checked ? 'X' : '';
                                    const comments = row.querySelector('input[type="text"]')?.value || '';
                                    accessoriesRows.push([description, confirm, notConfirm, na, comments]);
                                }
                            });
                        } else {
                            console.error('Accessories & Trims form not found.');
                        }
                        await addTable(['Description', 'Confirm', 'Not Confirm', 'N/A', 'Comments'], accessoriesRows);

                        // Appearance & Packing form (seems duplicated, adjust as needed)
                        const appearanceForm = document.querySelector('.group-3aaa table');
                        const appearanceRows = [];
                        if (appearanceForm) {
                            const appearanceRowsElements = appearanceForm.querySelectorAll('tr');
                            appearanceRowsElements.forEach(row => {
                                const description = row.querySelector('td')?.textContent.trim() || '';
                                if (description !== '') {
                                    const confirm = row.querySelector('input[value="confirm"]')?.checked ? 'X' : '';
                                    const notConfirm = row.querySelector('input[value="notConfirm"]')?.checked ? 'X' : '';
                                    const na = row.querySelector('input[value="na"]')?.checked ? 'X' : '';
                                    const comments = row.querySelector('input[type="text"]')?.value || '';
                                    appearanceRows.push([description, confirm, notConfirm, na, comments]);
                                }
                            });
                        } else {
                            console.error('Appearance & Packing form not found.');
                        }
                        await addTable(['Description', 'Confirm', 'Not Confirm', 'N/A', 'Comments'], appearanceRows);

                        // Inspection Result
                        addSectionTitle('Inspection Result');
                        const inspectionResult = document.querySelector('.button-group input[type="radio"]:checked');
                        const resultText = inspectionResult ? inspectionResult.parentElement.textContent.trim() : 'No option selected';
                        await addTable(['Inspection Result'], [[resultText]]);

                        // Save the PDF after all sections are added
                        doc.save('merged-forms.pdf');
                    } catch (error) {
                        console.error('Error generating PDF:', error);
                        alert('An error occurred while generating the PDF. Please check the console for details.');
                    }
                }

                
            
                function addInput(type) {
                    const container = document.getElementById(`${type}-input-container`);
        
                    // Create a new input element
                    const newInput = document.createElement('input');
                    newInput.type = 'text';
                    newInput.placeholder = `Enter ${type}`;
        
                    // Append the new input to the container
                    container.appendChild(newInput);
                }
        
                function addNewRow() {
                    const tbody = document.getElementById('dynamic-rows');
        
                    // Create a new row
                    const newRow = document.createElement('tr');
        
                    // Add three text input fields in the new row (no button in new rows)
                    for (let i = 0; i < 8; i++) { // Adjusted to 4 since the first cell was for the button
                        const cell = document.createElement('td');
                        const input = document.createElement('input');
                        input.type = 'text';
                        cell.appendChild(input);
                        newRow.appendChild(cell);
                    }
        
                    // Append the new row to the table body
                    tbody.appendChild(newRow);
                }

                function addRowT1() {
                const tableBody = document.querySelector('#dynamicTable1 tbody');
                const newRow = document.createElement('tr');
                
                newRow.innerHTML = `
                    <td><input type="text"></td>
                    <td><input type="text"></td>
                    <td><input type="text"></td>
                    <td><input type="text"></td>
                    <td><input type="text"></td>
                `;
                
                tableBody.appendChild(newRow);
                //paginateTable();
                //calculateTotals();
                }

                function addRowT2() {
                    const tableBody = document.querySelector('#dynamicTable2 tbody');
                    const newRow = document.createElement('tr');
                    
                    newRow.innerHTML = `
                        <td><input type="text"></td>
                        <td><input type="text" class="critical" oninput="calculateTotals()"></td>
                        <td><input type="text" class="major" oninput="calculateTotals()"></td>
                        <td><input type="text" class="minor" oninput="calculateTotals()"></td>
                    `;
                    
                    tableBody.appendChild(newRow);
                    //paginateTable();
                    calculateTotals();
                }

                function calculateTotals() {
                    let criticalTotal = 0, majorTotal = 0, minorTotal = 0;
                    
                    document.querySelectorAll('.critical').forEach(input => {
                        criticalTotal += Number(input.value) || 0;
                    });
                    document.querySelectorAll('.major').forEach(input => {
                        majorTotal += Number(input.value) || 0;
                    });
                    document.querySelectorAll('.minor').forEach(input => {
                        minorTotal += Number(input.value) || 0;
                    });
                    
                    document.getElementById('criticalTotal').textContent = criticalTotal;
                    document.getElementById('majorTotal').textContent = majorTotal;
                    document.getElementById('minorTotal').textContent = minorTotal;
                }
            </script>
</body>

<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="assets/js/dynamicTable.js"></script> -->

</html>
